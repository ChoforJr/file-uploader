<table>
  <caption>
    All files Available
  </caption>
  <tr>
    <th>Name</th>
    <th>Size (kb)</th>
    <th>Upload Time</th>
    <th>Folder</th>
    <th>Download</th>
    <th>Delete</th>
  </tr>
  <% for( let i = 0; i < files.length; i++ ) { %>
  <tr>
    <td><%= files[i].original_name %></td>
    <td><%= files[i].size/1000 %></td>
    <td><%= files[i].upload_time %></td>
    <td>
      <%= files[i].folders.title %>
      <a href="/changeFolder/<%= files[i].id %>">
        <button class="changeBtn">Change</button></a
      >
    </td>
    <td>
      <% // This splits the URL and inserts the 'fl_attachment' flag const
      urlParts = files[i].url.split('/upload/'); const downloadUrl = urlParts[0]
      + '/upload/fl_attachment/' + urlParts[1]; %>

      <a href="<%= downloadUrl %>" download="<%= files[i].original_name %>">
        <button type="button" class="downloadBtn">Download</button>
      </a>
    </td>
    <td>
      <form action="/deleteFile/<%= files[i].id %>" method="post">
        <button type="submit" class="deleteBtn">Delete</button>
      </form>
    </td>
  </tr>
  <% } %>
</table>
